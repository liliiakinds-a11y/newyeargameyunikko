<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³ã‚¸ãƒ£ãƒ³ãƒ—</title>
<style>
  body { margin:0; overflow:hidden; background:#ffeefc; font-family:"Noto Sans JP",sans-serif; }
  #gameCanvas { display:block; background:linear-gradient(#d6eaff,#ffffff); }
  #startScreen,#clearScreen {
    position:absolute; top:0; left:0; width:100%; height:100%;
    background:rgba(255,255,255,0.8); display:flex; flex-direction:column; justify-content:center; align-items:center;
    font-size:28px; text-align:center; z-index:10; padding:20px;
  }
  button {
    margin-top:20px; padding:12px 28px; font-size:22px; border-radius:12px; border:3px solid #ffd700;
    cursor:pointer; color:white; font-weight:bold; text-shadow:0 2px 3px rgba(0,0,0,0.3); transition:0.25s;
  }
  #startScreen button{background:#0fad59;}
  #clearScreen button{background:#d62828;}
  button:hover{background:#fff;color:#d62828;border-color:#fff;box-shadow:0 0 12px rgba(255,255,255,0.9),0 0 25px rgba(255,0,0,0.5);}
  #clearScreen img{width:200px;margin-bottom:20px;}
</style>
</head>
<body>

<div id="startScreen">
  <h1>ğŸ‰ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³ã‚¸ãƒ£ãƒ³ãƒ—ğŸ‰</h1>
  <p>ãƒ«ãƒ¼ãƒ«ï¼š</p>
  <ul style="text-align:left; font-size:22px;">
    <li>å·¦å³ã«ç§»å‹•ã—ã¦ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ç€åœ°</li>
    <li>é ‚ä¸Šã®ä¼šç¤¾ãƒ­ã‚´ã‚’ç›®æŒ‡ãã†ï¼</li>
    <li>ä¸‹ã«è½ã¡ã‚‹ã¨ã‚²ãƒ¼ãƒ æœ€åˆã‹ã‚‰</li>
  </ul>
  <button onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
</div>

<div id="clearScreen" style="display:none;">
  <img src="https://i.postimg.cc/Y0YxR5GT/020-yunikonzu-rogo.png" alt="Company Logo">
  <h1>ğŸŠ ã‚¯ãƒªã‚¢ï¼ ğŸŠ</h1>
  <p>é ‚ä¸Šã«åˆ°é”ï¼<br>ä»Šå¹´ã‚‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ğŸ‰âœ¨</p>
  <button onclick="location.reload()">ã‚‚ã†ä¸€åº¦</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³
const unicornImgURL = "https://i.postimg.cc/2jZwwYrf/351085a0_4f76_46d3_8386_7abcd94ce23d_(1).png";
const playerImg = new Image();
playerImg.src = unicornImgURL;
let player = { x: canvas.width/2, y: canvas.height*0.8, size:50, vy:0 };

// æ“ä½œ
let left=false, right=false;
document.addEventListener("keydown", e => { if(e.key==="ArrowLeft") left=true; if(e.key==="ArrowRight") right=true; });
document.addEventListener("keyup", e => { if(e.key==="ArrowLeft") left=false; if(e.key==="ArrowRight") right=false; });

// ã‚¿ãƒƒãƒæ“ä½œ
canvas.addEventListener("touchstart", e => {
  let touchX = e.touches[0].clientX;
  if(touchX < window.innerWidth/2) left=true;
  else right=true;
});
canvas.addEventListener("touchend", e => { left=false; right=false; });

// ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
let platforms = [];
const platformCount = 12;
for(let i=0;i<platformCount;i++){
  platforms.push({ x: Math.random()*(canvas.width-80), y: canvas.height - i*50 });
}

// ã‚´ãƒ¼ãƒ«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
const goalPlatform = { x: canvas.width*0.25, y: -100, width: 100, height: 20 };

// ãƒ­ã‚´ç”»åƒã‚’1å›ã ã‘èª­ã¿è¾¼ã‚€
const logoImg = new Image();
logoImg.src = "https://i.postimg.cc/Y0YxR5GT/020-yunikonzu-rogo.png";

// é›ª
let snowflakes = [];
for(let i=0;i<80;i++){ snowflakes.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, radius:Math.random()*3+1, speed:Math.random()*1+0.5}); }

// ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ«
let sparkles = [];

let gravity = 0.3, jumpPower = -8, gameStarted=false;

function startGame(){ document.getElementById("startScreen").style.display="none"; gameStarted=true; loop(); }

function checkPlatformCollision(){
  for(let p of platforms){
    if(player.vy>0 &&
       player.x+player.size/2>p.x &&
       player.x-player.size/2<p.x+80 &&
       player.y+player.size/2>p.y &&
       player.y+player.size/2<p.y+10){
      player.vy=jumpPower;
      for(let i=0;i<10;i++){
        sparkles.push({ x:player.x+(Math.random()-0.5)*40, y:player.y+(Math.random()-0.5)*40, radius:Math.random()*3+1, life:20+Math.random()*20 });
      }
    }
  }
}

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  if(!gameStarted) return;

  // ç§»å‹•
  if(left) player.x-=5;
  if(right) player.x+=5;
  if(player.x<0) player.x=canvas.width;
  if(player.x>canvas.width) player.x=0;

  // é‡åŠ›
  player.vy+=gravity;
  player.y+=player.vy;

  // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  if(player.y<canvas.height*0.5){
    let dy = canvas.height*0.5 - player.y;
    player.y = canvas.height*0.5;
    for(let p of platforms) p.y += dy;
    goalPlatform.y += dy;
  }

  checkPlatformCollision();

  // è½ä¸‹ â†’ ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ
  if(player.y > canvas.height + 50) location.reload();

  // ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³æç”»
  ctx.drawImage(playerImg, player.x-25, player.y-25, 50, 50);

  // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æç”»
  ctx.fillStyle = "#9ce7ff";
  for(let p of platforms) ctx.fillRect(p.x, p.y, 80, 10);

  // ã‚´ãƒ¼ãƒ«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æç”»
  ctx.fillStyle = "#ffd700";
  ctx.fillRect(goalPlatform.x, goalPlatform.y, goalPlatform.width, goalPlatform.height);
  ctx.drawImage(logoImg, goalPlatform.x, goalPlatform.y-50, goalPlatform.width, 50);

  // ã‚¯ãƒªã‚¢åˆ¤å®š
  if(player.y-player.size/2 <= goalPlatform.y + goalPlatform.height){
    document.getElementById("clearScreen").style.display="flex";
    return;
  }

  // é›ª
  ctx.fillStyle="white";
  for(let s of snowflakes){
    ctx.beginPath(); ctx.arc(s.x,s.y,s.radius,0,Math.PI*2); ctx.fill();
    s.y+=s.speed; if(s.y>canvas.height) s.y=0;
  }

  // ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ«
  for(let i=sparkles.length-1;i>=0;i--){
    let sp = sparkles[i];
    ctx.fillStyle = `rgba(255,255,255,${sp.life/40})`;
    ctx.beginPath(); ctx.arc(sp.x, sp.y, sp.radius, 0, Math.PI*2); ctx.fill();
    sp.life--; if(sp.life<=0) sparkles.splice(i,1);
  }

  requestAnimationFrame(loop);
}
</script>
</body>
</html>
